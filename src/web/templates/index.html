<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat - 个性化聊天系统</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- 侧边栏 -->
            <div class="col-md-3 sidebar">
                <div class="p-3">
                    <h3 class="mb-4">AI Chat</h3>
                    
                    <!-- 角色选择 -->
                    <div class="mb-4">
                        <h5>选择角色</h5>
                        <select id="character-select" class="form-select"></select>
                    </div>
                    
                    <!-- 会话管理 -->
                    <div class="mb-4">
                        <h5>最近会话</h5>
                        <div id="sessions-list" class="list-group"></div>
                    </div>
                    
                    <!-- 操作按钮 -->
                    <div class="mb-4">
                        <h5>操作</h5>
                        <button id="new-chat" class="btn btn-primary mb-2 w-100">新对话</button>
                        <button id="view-summary" class="btn btn-secondary mb-2 w-100">查看摘要</button>
                    </div>
                </div>
            </div>
            
            <!-- 主聊天区域 -->
            <div class="col-md-9 chat-area">
                <!-- 聊天记录 -->
                <div id="chat-messages" class="chat-messages">
                    <div class="welcome-message">
                        <h2>欢迎使用 AI Chat</h2>
                        <p>选择一个角色开始聊天，或者继续最近的对话。</p>
                    </div>
                </div>
                
                <!-- 输入区域 -->
                <div class="chat-input-area">
                    <div class="input-group">
                        <textarea id="message-input" class="form-control" placeholder="输入消息..." rows="2"></textarea>
                        <button id="send-button" class="btn btn-primary">发送</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 摘要模态框 -->
    <div class="modal fade" id="summaryModal" tabindex="-1" aria-labelledby="summaryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="summaryModalLabel">对话摘要</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="summary-content">
                    正在加载摘要...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.0.0/marked.min.js"></script>
    <script src="{{ url_for('static', path='/js/chat.js') }}"></script>
</body>
</html>
